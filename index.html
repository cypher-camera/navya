<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AnushaEpicEats - Responsive Bakery Carousel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #fff9e6 0%, #fff0f8 100%);
      color: #333;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .top-bar {
      background: linear-gradient(to right, #ff9b86, #ef7af7);
      padding: 18px;
      text-align: center;
      color: white;
      font-size: 32px;
      font-weight: bold;
      position: sticky;
      top: 0;
      z-index: 100;
      width: 100%;
      box-shadow: 0 4px 20px rgba(239, 122, 247, 0.4);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      font-family: 'Brush Script MT', cursive;
      letter-spacing: 2px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    @media (max-width: 600px) {
      .top-bar {
        font-size: 24px;
        padding: 14px;
      }
    }

    .hero-slider {
      position: relative;
      width: 100%;
      height: 65vh;
      overflow: hidden;
      background-attachment: fixed;
      background-position: center;
      background-size: cover;
      margin-bottom: 40px;
      z-index: 1; /* Ensure slides stay behind content */
    }

    @media (max-width: 900px) {
      .hero-slider {
        height: 50vh;
      }
    }

    @media (max-width: 600px) {
      .hero-slider {
        height: 40vh;
      }
    }

    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transform: scale(1.1);
      transition: opacity 1s ease-in-out, transform 1s ease-in-out;
      z-index: 1; /* Lower z-index for slides */
    }

    .slide.active {
      opacity: 1;
      transform: scale(1);
      z-index: 1;
    }

    .overlay {
      position: absolute;
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 255, 255, 0.85);
      color: #ef7af7;
      padding: 14px 32px;
      border-radius: 40px;
      font-size: 26px;
      font-weight: bold;
      box-shadow: 0 8px 25px rgba(239, 122, 247, 0.5);
      text-shadow: 1px 1px 2px rgba(239, 122, 247, 0.6);
      animation: pulse 2s infinite;
      font-family: 'Dancing Script', cursive;
      text-align: center;
      z-index: 2; /* Higher than slides */
    }

    @keyframes pulse {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.05); }
      100% { transform: translateX(-50%) scale(1); }
    }

    @media (max-width: 900px) {
      .overlay {
        font-size: 22px;
        padding: 12px 24px;
        width: 90%;
      }
    }

    @media (max-width: 600px) {
      .overlay {
        font-size: 18px;
        padding: 10px 20px;
        width: 90%;
        bottom: 5%;
      }
    }

    h1 {
      text-align: center;
      font-size: 42px;
      margin: 30px 0 20px;
      color: #ef7af7;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
      display: inline-block;
      padding: 0 20px;
      z-index: 10; /* Higher than slides */
    }

    h1:after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(to right, #ff9b86, #ef7af7);
      border-radius: 2px;
    }

    @media (max-width: 900px) {
      h1 {
        font-size: 36px;
        margin: 25px 0 15px;
      }
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 28px;
        margin: 20px 0 10px;
      }
      
      h1:after {
        width: 60px;
        height: 3px;
        bottom: -8px;
      }
    }

    /* 3D Carousel Styles */
    .carousel-wrapper {
      position: relative;
      max-width: 1200px;
      width: 90%;
      height: 500px;
      margin: 40px auto;
      perspective: 2000px;
      overflow: hidden;
      z-index: 10; /* Higher than slides */
    }

    @media (max-width: 900px) {
      .carousel-wrapper {
        height: 400px;
        perspective: 1500px;
      }
    }

    @media (max-width: 600px) {
      .carousel-wrapper {
        height: 350px;
        perspective: 1000px;
      }
    }

    .carousel-container {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 1s cubic-bezier(0.17, 0.67, 0.83, 0.67);
      z-index: 10; /* Higher than slides */
    }

    .product-card {
      position: absolute;
      width: 320px;
      height: 420px;
      background: white;
      border-radius: 20px;
      overflow: hidden;
      text-align: center;
      padding: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
      transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      cursor: pointer;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10; /* Ensure above slides */
    }

    @media (max-width: 900px) {
      .product-card {
        width: 260px;
        height: 360px;
      }
    }

    @media (max-width: 600px) {
      .product-card {
        width: 280px;
        height: 380px;
      }
    }

    .product-card img {
      width: 100%;
      height: 240px;
      object-fit: cover;
      border-radius: 12px;
      transition: all 0.5s ease;
      transform: translateZ(30px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .product-card.center img {
      transform: translateZ(50px) scale(1.05);
    }

    @media (max-width: 900px) {
      .product-card img {
        height: 180px;
      }
    }

    @media (max-width: 600px) {
      .product-card img {
        height: 200px;
      }
    }

    .product-card h3 {
      font-size: 22px;
      margin: 15px 0 8px;
      color: #333;
      transform: translateZ(20px);
    }

    @media (max-width: 600px) {
      .product-card h3 {
        font-size: 20px;
        margin: 12px 0 6px;
      }
    }

    .product-card p {
      font-size: 20px;
      color: #ef7af7;
      font-weight: bold;
      transform: translateZ(20px);
    }

    @media (max-width: 600px) {
      .product-card p {
        font-size: 18px;
      }
    }

    .product-card.center {
      border: 4px dashed #ef7af7;
      box-shadow: 0 25px 50px rgba(239, 122, 247, 0.4);
      z-index: 12; /* Higher than other cards */
      transform: translateX(-50%) translateZ(100px);
    }

    .product-card.center .product-info {
      background: linear-gradient(to right, #ffefef, #fff0f9);
      padding: 12px;
      border-radius: 15px;
      transform: translateZ(30px);
    }

    .product-card.left {
      transform: translateX(-140%) translateZ(50px) rotateY(20deg);
      opacity: 0.9;
      filter: brightness(0.95);
      z-index: 11; /* Higher than hidden cards */
    }

    .product-card.right {
      transform: translateX(40%) translateZ(50px) rotateY(-20deg);
      opacity: 0.9;
      filter: brightness(0.95);
      z-index: 11; /* Higher than hidden cards */
    }

    .product-card.hidden {
      opacity: 0;
      z-index: 1;
      pointer-events: none;
    }

    /* Mobile-specific carousel positioning */
    @media (max-width: 768px) {
      .product-card.left {
        transform: translateX(-120%) translateZ(50px) rotateY(20deg);
      }
      
      .product-card.right {
        transform: translateX(20%) translateZ(50px) rotateY(-20deg);
      }
    }

    @media (max-width: 600px) {
      .product-card.left,
      .product-card.right {
        transform: translateX(-50%) translateZ(0) rotateY(0);
        opacity: 0;
        pointer-events: none;
      }
      
      .product-card.center {
        transform: translateX(-50%) translateZ(0);
        border: 4px dashed #ef7af7;
        box-shadow: 0 15px 35px rgba(239, 122, 247, 0.4);
        z-index: 10;
        animation: none;
      }
      
      .product-card.center .product-info {
        background: linear-gradient(to right, #ffefef, #fff0f9);
        padding: 12px;
        border-radius: 15px;
        transform: none;
      }
    }

    .product-info {
      background: white;
      border-radius: 12px;
      padding: 10px;
      transition: all 0.4s ease;
    }

    .product-card:hover .product-info {
      background: linear-gradient(to right, #ffefef, #fff0f9);
      transform: translateY(-5px) translateZ(10px);
    }

    .carousel-nav {
      display: flex;
      justify-content: center;
      margin-top: 40px;
      gap: 20px;
      z-index: 10; /* Higher than slides */
    }

    .carousel-btn {
      background: linear-gradient(to right, #ff9b86, #ef7af7);
      border: none;
      color: white;
      font-size: 24px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(239, 122, 247, 0.5);
      transition: all 0.3s ease;
      transform: translateZ(0);
      z-index: 10; /* Higher than slides */
    }

    .carousel-btn:hover {
      transform: scale(1.1) translateZ(10px);
      box-shadow: 0 12px 25px rgba(239, 122, 247, 0.7);
    }

    .carousel-btn:active {
      transform: scale(0.95) translateZ(5px);
    }

    .carousel-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    @media (max-width: 900px) {
      .carousel-btn {
        width: 60px;
        height: 60px;
        font-size: 22px;
      }
    }

    @media (max-width: 600px) {
      .carousel-btn {
        width: 55px;
        height: 55px;
        font-size: 20px;
        margin: 0 10px;
      }
      
      .carousel-nav {
        margin-top: 30px;
        gap: 10px;
      }
    }

    .carousel-dots {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      gap: 15px;
      flex-wrap: wrap;
      max-width: 90%;
      z-index: 10; /* Higher than slides */
    }

    .dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #e0c1e8;
      cursor: pointer;
      transition: all 0.3s ease;
      transform: translateZ(0);
    }

    .dot.active {
      background: #ef7af7;
      transform: scale(1.4);
      box-shadow: 0 0 10px rgba(239, 122, 247, 0.8);
    }

    @media (max-width: 600px) {
      .carousel-dots {
        gap: 10px;
        margin-top: 20px;
      }
      
      .dot {
        width: 14px;
        height: 14px;
      }
    }

    .footer {
      margin-top: 60px;
      text-align: center;
      padding: 30px;
      color: #ef7af7;
      font-size: 18px;
      background: rgba(255, 255, 255, 0.7);
      width: 100%;
      border-top: 2px dashed #ef7af7;
      z-index: 10; /* Higher than slides */
    }

    @media (max-width: 600px) {
      .footer {
        margin-top: 40px;
        padding: 20px;
        font-size: 16px;
      }
    }

    .social-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      z-index: 10; /* Higher than slides */
    }

    .social-icons a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      background: linear-gradient(to right, #ff9b86, #ef7af7);
      border-radius: 50%;
      color: white;
      font-size: 24px;
      text-decoration: none;
      transition: all 0.3s ease;
      transform: translateZ(0);
    }

    .social-icons a:hover {
      transform: translateY(-5px) scale(1.1) translateZ(10px);
      box-shadow: 0 8px 15px rgba(239, 122, 247, 0.6);
    }

    @media (max-width: 600px) {
      .social-icons {
        gap: 15px;
        margin-top: 15px;
      }
      
      .social-icons a {
        width: 45px;
        height: 45px;
        font-size: 22px;
      }
    }

    /* Animation for product cards */
    @keyframes float {
      0% { transform: translateX(-50%) translateY(0) translateZ(0); }
      50% { transform: translateX(-50%) translateY(-15px) translateZ(10px); }
      100% { transform: translateX(-50%) translateY(0) translateZ(0); }
    }

    .product-card.center {
      animation: float 4s ease-in-out infinite;
    }

    @media (max-width: 600px) {
      .product-card.center {
        animation: none;
      }
    }

    /* Mobile Navigation Swipe Support */
    .carousel-container {
      touch-action: pan-y;
    }
    
    .search-container {
      position: relative;
      margin-right: 20px;
      transition: all 0.3s ease;
    }

    .search-box {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50px;
      padding: 8px 15px;
      transition: all 0.3s ease;
      width: 250px;
    }

    .search-box.expanded {
      background: rgba(255, 255, 255, 0.9);
    }

    #searchInput {
      background: transparent;
      border: none;
      color: white;
      font-size: 16px;
      padding: 5px 10px;
      width: 100%;
      outline: none;
      transition: all 0.3s ease;
    }

    .search-box.expanded #searchInput {
      color: #333;
    }

    #searchInput::placeholder {
      color: rgba(255, 255, 255, 0.8);
    }

    .search-box.expanded #searchInput::placeholder {
      color: #aaa;
    }

    .search-btn {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      padding: 5px;
    }

    .search-results-count {
      position: absolute;
      bottom: -25px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 14px;
      color: white;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      padding: 3px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    /* Mobile search */
    .mobile-search-btn {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      margin-right: 15px;
      cursor: pointer;
    }

    .mobile-search-container {
      display: none;
      width: 100%;
      padding: 15px;
      background: linear-gradient(to right, #ff9b86, #ef7af7);
      position: sticky;
      top: 70px;
      z-index: 100;
    }

    .mobile-search-box {
      display: flex;
      align-items: center;
      background: white;
      border-radius: 50px;
      padding: 10px 15px;
      width: 100%;
    }

    .mobile-search-box input {
      flex: 1;
      border: none;
      padding: 8px;
      font-size: 16px;
      outline: none;
    }

    .mobile-search-box button {
      background: none;
      border: none;
      color: #ef7af7;
      font-size: 20px;
      cursor: pointer;
    }
    
    .no-results {
      display: none;
      text-align: center;
      padding: 40px;
      color: #ef7af7;
      z-index: 10;
      background: white;
      border-radius: 20px;
      margin: 20px auto;
      max-width: 80%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .content-section {
      position: relative;
      z-index: 10;
      width: 100%;
    }
    h1{
      margin-left: 40%;
    }
    span{
       margin-left: 40%;
    }
  </style>
</head>
<body>


  <div class="top-bar">
    <span>AnushaEpicEats</span>
    <div class="search-container">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search products...">
        <button class="search-btn" id="searchButton"><i class="fas fa-search"></i></button>
      </div>
      <div class="search-results-count" id="resultsCount"></div>
    </div>
    
    <button class="mobile-search-btn" id="mobileSearchBtn">
      <i class="fas fa-search"></i>
    </button>
  </div>
  
  <div class="mobile-search-container" id="mobileSearchContainer">
    <div class="mobile-search-box">
      <input type="text" id="mobileSearchInput" placeholder="Search products...">
      <button id="closeMobileSearch"><i class="fas fa-times"></i></button>
    </div>
  </div>
  
   <div class="hero-slider">
    <img src="slide 1.jpg" class="slide active" alt="Delicious Desserts">
    <img src="https://images.unsplash.com/photo-1558326567-98ae2405596b?xlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1476&q=80" class="slide" alt="Colorful Cupcakes">
    <img src="https://images.unsplash.com/photo-1550617931-e17a7b70dce2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" class="slide" alt="Assorted Pastries">
    <div class="overlay">Made With Love 💖</div>
  </div>

  <div class="content-section">
    <h1>OUR PRODUCTS</h1>
      <!-- Add this section above the carousel -->
  <div id="taskFlow" style="display: none; text-align: center; padding: 40px;">
    <div id="countdownContainer">
      <h2>Testing Task</h2>
      <p>Please stay on this page for <span id="countdown">60</span> seconds</p>
      <div style="font-size: 48px; margin: 20px;">⏱️</div>
    </div>
    
    <div id="surveySection" style="display: none;">
      <h2>Survey Time!</h2>
      <iframe id="surveyIframe" 
              src="https://docs.google.com/forms/d/e/1FAIpQLSe69iZK9S_ExNIvxRXbr8-EyidXtwI33ZxO_pehwKCigi8RGg/viewform?usp=dialog" 
              width="100%" 
              height="600" 
              frameborder="0" 
              marginheight="0" 
              marginwidth="0">
        Loading...
      </iframe>
      <button id="completeTask" style="background: #4CAF50; color: white; border: none; padding: 15px 40px; font-size: 18px; border-radius: 50px; cursor: pointer; margin-top: 20px;">
        Complete Task &amp; Get XP
      </button>
    </div>
  </div>
  <div id="normalContent">
    <div class="carousel-wrapper">
      <div class="carousel-container" id="carouselContainer">
        <!-- Product cards will be generated dynamically -->
      </div>
    </div>
    
    <div class="carousel-nav">
      <button class="carousel-btn" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
      <button class="carousel-btn" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
    </div>
    
    <div class="carousel-dots" id="carouselDots">
      <!-- Dots will be generated dynamically -->
    </div>
    
    <div class="no-results" id="noResults">
      <i class="fas fa-search" style="font-size: 48px; margin-bottom: 20px;"></i>
      <h2>No products found</h2>
      <p>Try adjusting your search terms</p>
    </div>
  </div>
  
  <div class="footer">
    <p>Follow us for daily sweet inspirations!</p>
    <div class="social-icons">
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-whatsapp"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
    </div>
    <p style="margin-top: 20px;">© 2023 AnushaEpicEats. All rights reserved.</p>
  </div>
</div>
  <script>
   // Sample product data
    const products = [
      {
        name: "biscoff",
        title: "Biscoff Brownie",
        price: "Rs 70",
        image: "biscoffbrownie.jpg"
      },
      {
        name: "cheesecake",
        title: "Cheesecake",
        price: "Rs 170",
        image: "photos/cheesecake1.jpeg"
      },
      {
        name: "classicbrownie",
        title: "Walnut Brownie",
        price: "Rs 45",
        image: "photos/Brownie 1.jpg"
      },
      {
        name: "cookies",
        title: "Finger Cookies/kg",
        price: "Rs 700",
        image: "photos/cookies1.jpeg"
      },
      {
        name: "cupcakes",
        title: "Cupcakes",
        price: "Rs 50",
        image: "photos/cupcakes.jpeg"
      },
      {
        name: "glasscake",
        title: "Glass Cake",
        price: "Rs 70",
        image: "photos/glasscake2.jpeg"
      },
      {
        name: "icingcake",
        title: "Icing Cake",
        price: "Rs 600",
        image: "photos/icingcake.jpeg"
      },
      {
        name: "jarcake",
        title: "Jar Cake",
        price: "Rs 150",
        image: "photos/jarcake1.jpeg"
      },
      {
        name: "loafcake",
        title: "Loaf Cake",
        price: "Rs 50",
        image: "photos/loafcake1.jpeg"
      },
      {
        name: "muffins",
        title: "Muffins",
        price: "Rs 80",
        image: "photos/muffins1.jpeg"
      },
      {
        name: "nankhatai",
        title: "Nankhatai/kg",
        price: "Rs 700",
        image: "photos/nankhatai1.jpeg"
      },
      {
        name: "sizzlerbrownie",
        title: "Sizzler Brownie",
        price: "Rs 45",
        image: "photos/sizzlerbrownie.jpg"
      },
      {
        name: "tubcake",
        title: "Tub Cake",
        price: "Rs 250",
        image: "photos/tubcake1.jpg"
      },
    
      {
        name: "donut",
        title: "Donut",
        price: "Rs 60",
        image: "photos/donut1.webp"
      },
      {
        name: "drycake",
        title: "Dry Cake",
        price: "Rs 150",
        image: "drycake.jpg"
      },
      {
        name: "Special",
        title: "Thandai Powder",
        price: "Rs 190",
        image: "photos/WhatsApp Image 2025-06-01 at 20.53.23.jpeg"
   } ];

    // Slide functionality
    const slides = document.querySelectorAll('.slide');
    let currentSlide = 0;
    setInterval(() => {
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add('active');
    }, 4000);

    // Carousel functionality
    const carouselContainer = document.getElementById('carouselContainer');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const carouselDots = document.getElementById('carouselDots');
    const noResults = document.getElementById('noResults');
    const resultsCount = document.getElementById('resultsCount');
    
    let currentIndex = 0;
    let filteredProducts = [...products];
    
    // Generate product cards
    function generateProductCards() {
      carouselContainer.innerHTML = '';
      
      filteredProducts.forEach((product, index) => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img src="${product.image}" alt="${product.title}">
          <div class="product-info">
            <h3>${product.title}</h3>
            <p>${product.price}</p>
          </div>
        `;
        carouselContainer.appendChild(card);
      });
      
      // Show/hide no results message
      if (filteredProducts.length === 0) {
        noResults.style.display = 'block';
        document.querySelector('.carousel-nav').style.display = 'none';
        document.querySelector('.carousel-dots').style.display = 'none';
      } else {
        noResults.style.display = 'none';
        document.querySelector('.carousel-nav').style.display = 'flex';
        document.querySelector('.carousel-dots').style.display = 'flex';
      }
      
      // Initialize positions
      updateCarousel();
      
      // Update results count
      if (resultsCount) {
        resultsCount.textContent = `${filteredProducts.length} product${filteredProducts.length !== 1 ? 's' : ''} found`;
        resultsCount.style.opacity = '1';
        setTimeout(() => { resultsCount.style.opacity = '0'; }, 2000);
      }
    }
    
    // Generate dots for navigation
    function generateDots() {
      carouselDots.innerHTML = '';
      
      for (let i = 0; i < filteredProducts.length; i++) {
        const dot = document.createElement('div');
        dot.className = 'dot';
        if (i === currentIndex) dot.classList.add('active');
        dot.addEventListener('click', () => {
          currentIndex = i;
          updateCarousel();
        });
        carouselDots.appendChild(dot);
      }
    }
    
    // Update carousel display
    function updateCarousel() {
      const cards = document.querySelectorAll('.product-card');
      
      // Remove all classes and reset positions
      cards.forEach((card, index) => {
        card.classList.remove('left', 'center', 'right', 'hidden');
        card.style.display = 'block';
      });
      
      // Position cards based on currentIndex
      cards.forEach((card, index) => {
        if (index === currentIndex) {
          card.classList.add('center');
        } else if (index === currentIndex - 1) {
          card.classList.add('left');
        } else if (index === currentIndex + 1) {
          card.classList.add('right');
        } else {
          card.classList.add('hidden');
        }
      });
      
      // Update dots
      document.querySelectorAll('.dot').forEach((dot, index) => {
        if (dot) dot.classList.toggle('active', index === currentIndex);
      });
      
      // Update button states
      if (prevBtn) prevBtn.disabled = currentIndex === 0;
      if (nextBtn) nextBtn.disabled = currentIndex === filteredProducts.length - 1;
    }
    
    // Next product
    function nextProduct() {
      if (currentIndex < filteredProducts.length - 1) {
        currentIndex++;
        updateCarousel();
      }
    }
    
    // Previous product
    function prevProduct() {
      if (currentIndex > 0) {
        currentIndex--;
        updateCarousel();
      }
    }
    
    // Search functionality
    function filterProducts(searchTerm) {
      if (!searchTerm) {
        return [...products];
      }
      
      const term = searchTerm.toLowerCase();
      return products.filter(product => 
        product.title.toLowerCase().includes(term) || 
        product.name.toLowerCase().includes(term)
      );
    }
    
    function handleSearch(searchTerm) {
      filteredProducts = filterProducts(searchTerm);
      currentIndex = 0;
      generateProductCards();
      generateDots();
    }
    
    // Initialize carousel
    function initCarousel() {
      generateProductCards();
      generateDots();
      
      // Add event listeners
      prevBtn.addEventListener('click', prevProduct);
      nextBtn.addEventListener('click', nextProduct);
      
      // Search input event listeners
      const searchInput = document.getElementById('searchInput');
      const mobileSearchInput = document.getElementById('mobileSearchInput');
      const searchButton = document.getElementById('searchButton');
      const mobileSearchBtn = document.getElementById('mobileSearchBtn');
      const closeMobileSearch = document.getElementById('closeMobileSearch');
      const mobileSearchContainer = document.getElementById('mobileSearchContainer');
      const searchBox = document.querySelector('.search-box');
      
      // Desktop search
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          if (this.value) {
            searchBox.classList.add('expanded');
          } else {
            searchBox.classList.remove('expanded');
          }
          handleSearch(this.value);
        });
      }
      
      if (searchButton) {
        searchButton.addEventListener('click', function() {
          handleSearch(searchInput.value);
        });
      }
      
      // Mobile search
      if (mobileSearchBtn) {
        mobileSearchBtn.addEventListener('click', function() {
          mobileSearchContainer.style.display = 'block';
          setTimeout(() => {
            if (mobileSearchInput) mobileSearchInput.focus();
          }, 100);
        });
      }
      
      if (closeMobileSearch) {
        closeMobileSearch.addEventListener('click', function() {
          mobileSearchContainer.style.display = 'none';
        });
      }
      
      if (mobileSearchInput) {
        mobileSearchInput.addEventListener('input', function() {
          handleSearch(this.value);
        });
      }
    }
    
    // Initialize on load
   const redirectURL = new URLSearchParams(window.location.search).get("redirect");

    if (redirectURL) {
      const decoded = decodeURIComponent(redirectURL);
      let seconds = 5;
      const countdown = document.getElementById("countdown");

      const timer = setInterval(() => {
        seconds--;
        countdown.textContent = `Redirecting in ${seconds} seconds...`;

        if (seconds <= 0) {
          clearInterval(timer);
          window.location.href = decoded;
        }
      }, 1000); // Run every 1 second
    } else {
      document.getElementById("countdown").textContent = "Invalid or missing redirect link.";
    }
   const urlParams = new URLSearchParams(window.location.search);
  const redirect = urlParams.get('redirect');

  if (redirect) {
    document.getElementById('normalContent').style.display = 'none';
    document.getElementById('taskFlow').style.display = 'block';
    
    const decodedRedirect = decodeURIComponent(redirect);
    let seconds = 60;
    const countdownEl = document.getElementById('countdown');
    const countdownContainer = document.getElementById('countdownContainer');
    const surveySection = document.getElementById('surveySection');
    const completeBtn = document.getElementById('completeTask');
    
    // Start countdown
    const timer = setInterval(() => {
      seconds--;
      countdownEl.textContent = seconds;
      
      if (seconds <= 0) {
        clearInterval(timer);
        countdownContainer.style.display = 'none';
        surveySection.style.display = 'block';
      }
    }, 1000);
    
    // Handle task completion
    completeBtn.addEventListener('click', () => {
      window.location.href = decodedRedirect;
    });
  } else {
    document.getElementById('normalContent').style.display = 'block';
    document.getElementById('taskFlow').style.display = 'none';
    // Initialize carousel as normal
    initCarousel();
  }

  </script>

</body>
</html>
