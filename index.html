<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Am I forgiven?</title>
  <style>
    body{margin:0;background:#0b0b0f;color:#e7e7ec;font-family:system-ui,Segoe UI,Roboto,Arial}
    .wrap{min-height:100dvh;display:grid;place-items:center;padding:20px}
    .card{width:min(680px,94vw);background:#111218;border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:22px;box-shadow:0 22px 60px rgba(0,0,0,.55)}
    .title{text-align:center;margin:6px 8px 8px;font-size:clamp(22px,4.5vw,30px)}
    .sub{text-align:center;color:#9aa0a6;margin:0 8px 12px}
    .question{text-align:center;margin:8px 8px 14px;font-size:clamp(18px,4vw,24px)}
    .stage{width:220px;margin:8px auto 14px}
    .state{display:none}
    .state.active{display:block}
    .cta{display:flex;justify-content:center;gap:12px;flex-wrap:wrap}
    button{border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));color:#e7e7ec;padding:12px 16px;border-radius:14px;cursor:pointer;font-weight:600}
    .yes{background:linear-gradient(180deg,rgba(114,224,169,.22),rgba(114,224,169,.08))}
    .no{background:linear-gradient(180deg,rgba(255,77,109,.20),rgba(255,77,109,.06))}
    .hint{text-align:center;color:#9aa0a6;margin-top:12px;font-size:12.5px;min-height:1em}
    :root{
  /* Pink theme */
  --bg:#fff4f7;            /* page background (very light pink) */
  --panel:#ffeaf0;         /* card background */
  --text:#2a1a1f;          /* primary text (deep rose-brown) */
  --muted:#7b5964;         /* secondary text */
  --heart:#ff5c8a;         /* primary heart pink */
  --heart2:#ff8fb1;        /* alt heart pink */
  --accent:#ff9fbc;        /* accent mint -> pink */
  --ring: rgba(182, 84, 122, .18); /* borders/outline */

  /* Buttons */
  --yes-bg1:#ffd1e1;
  --yes-bg2:#ffc6da;
  --no-bg1:#ffbfd2;
  --no-bg2:#ffafc8;
}
body{
  background:
    radial-gradient(1200px 800px at 80% -10%, #ffe3ee 0%, transparent 60%),
    radial-gradient(1000px 600px at -10% 110%, #ffd9e8 0%, transparent 55%),
    var(--bg);
}
.yes{
  background:linear-gradient(180deg, var(--yes-bg1), var(--yes-bg2));
  border-color: color-mix(in srgb, var(--accent) 45%, var(--ring));
  color:#4a2432;
}
.no{
  background:linear-gradient(180deg, var(--no-bg1), var(--no-bg2));
  border-color: color-mix(in srgb, var(--heart) 45%, var(--ring));
  color:#4a2432;
}
.glow{
  background:
    radial-gradient(600px 160px at 50% -10%, rgba(255,92,138,.18), transparent 60%),
    radial-gradient(600px 160px at 50% 110%, rgba(255,159,188,.16), transparent 60%);
}

  </style>
</head>
<body>
  <div class="wrap">
    <section class="card">
      <h1 class="title">I‚Äôm really sorry ‚ù§ my kuchu muchu</h1>
      <p class="sub">am sorry for comparing my princess</p>

      <p class="question" id="q">Am I forgiven? ü•∫</p>

      <!-- Character stage: swap which Tenor embed is visible -->
      <div class="stage">
        <!-- START state -->
        <div id="st-start" class="state active">
          <div class="tenor-gif-embed" data-postid="9739658237377022608" data-share-method="host" data-aspect-ratio="1" data-width="100%">
            <a href="https://tenor.com/view/mochi-cat-glomp-head-rub-gif-9739658237377022608">Mochi Cat Glomp Sticker</a>
          </div>
        </div>

        <!-- NO-1 happy taps -->
        <div id="st-no1" class="state">
          <div class="tenor-gif-embed" data-postid="7251017984862143478" data-share-method="host" data-aspect-ratio="1" data-width="100%">
            <a href="https://tenor.com/view/happy-taps-gif-7251017984862143478">Happy Taps Sticker</a>
          </div>
        </div>

        <!-- NO-2 sad tears -->
        <div id="st-no2" class="state">
          <div class="tenor-gif-embed" data-postid="17081298557827211752" data-share-method="host" data-aspect-ratio="1.10048" data-width="100%">
            <a href="https://tenor.com/view/peach-goma-sad-tears-gif-17081298557827211752">Peach Goma Sad Tears Sticker</a>
          </div>
        </div>

        <!-- NO-3 funny dodge -->
        <div id="st-no3" class="state">
          <div class="tenor-gif-embed" data-postid="2404834808256676251" data-share-method="host" data-aspect-ratio="1.23333" data-width="100%">
            <a href="https://tenor.com/view/%E0%B8%94%E0%B8%B5%E0%B9%80%E0%B8%88%E0%B8%81%E0%B8%9A-%E0%B9%82%E0%B8%94%E0%B8%99%E0%B9%80%E0%B8%82%E0%B9%89%E0%B8%B2%E0%B9%81%E0%B8%A5%E0%B9%89%E0%B8%A7-gif-2404834808256676251">Funny Dodge</a>
          </div>
        </div>

        <!-- YES state -->
        <div id="st-yes" class="state">
          <div class="tenor-gif-embed" data-postid="13419239015106351850" data-share-method="host" data-aspect-ratio="1.27907" data-width="100%">
            <a href="https://tenor.com/view/crystal-amaru-gif-13419239015106351850">Crystal Amaru Sticker</a>
          </div>
        </div>
      </div>

      <div class="cta" id="cta">
        <button id="yes" class="yes">Yes</button>
        <button id="no" class="no">No</button>
      </div>
      <p class="hint" id="hint">Tap ‚ÄúNo‚Äù if you can catch it‚Ä¶</p>
    </section>
  </div>

  <!-- Tenor embed script (only once) -->
  <script async src="https://tenor.com/embed.js" type="text/javascript"></script>

  <script>
  const q    = document.getElementById('q');
  const hint = document.getElementById('hint');
  const yes  = document.getElementById('yes');
  const no   = document.getElementById('no');
  const cta  = document.getElementById('cta');

  // Tenor state helpers (from earlier)
  const states = ['st-start','st-no1','st-no2','st-no3','st-yes'].map(id=>document.getElementById(id));
  function show(id){ states.forEach(s=>s.classList.toggle('active', s.id===id)); }

  // Floating hearts background (call once)
  const heartsLayer = document.createElement('div');
  heartsLayer.style.position = 'fixed';
  heartsLayer.style.inset = '0';
  heartsLayer.style.pointerEvents = 'none';
  heartsLayer.style.zIndex = '0';
  document.body.appendChild(heartsLayer);

  function spawnHeart(){
    const h = document.createElement('div');
    h.textContent = '‚ù§';
    h.style.position='absolute';
    h.style.left = (Math.random()*100)+'vw';
    h.style.bottom='-8vh';
    h.style.fontSize = (14 + Math.random()*16)+'px';
    h.style.color = Math.random()<0.5 ? '#ff4d6d' : '#ff7a90';
    h.style.opacity = '.12';
    h.style.filter = 'drop-shadow(0 6px 12px rgba(255,77,109,.25))';
    const drift = (Math.random()*80 - 40);
    const dur = 7 + Math.random()*6;
    h.animate([
      { transform:`translateY(0) translateX(0)` , opacity:0 },
      { opacity:.9, offset:.1 },
      { transform:`translateY(-120vh) translateX(${drift}px)`, opacity:0 }
    ], { duration: dur*1000, easing:'linear' });
    heartsLayer.appendChild(h);
    setTimeout(()=>h.remove(), dur*1000+400);
  }
  setInterval(spawnHeart, 380);

  // Evasive movement after 3rd No
  let evasive=false, noClicks=0;
  function enableEvasive(){
    if(evasive) return;
    evasive=true;
    hint.textContent = "üòâ";
    no.addEventListener('mouseenter', dodge, {passive:true});
    no.addEventListener('touchstart', e=>{ e.preventDefault(); dodge(); }, {passive:false});
    no.addEventListener('click', e=>{ e.preventDefault(); dodge(); });
    no.addEventListener('focus', dodge);
  }
  function dodge(){
   
    const container = cta;                  // the flex box holding Yes/No
    const btn = no;

    // Ensure relative positioning
    btn.style.position = 'absolute';

    // Get sizes
    const c = container.getBoundingClientRect();
    const b = btn.getBoundingClientRect();

    // Safe padding to keep button fully visible
    const padX = 8;                          // small gap from edges
    const padY = 8;

    // Available movement area
    const maxX = Math.max(0, c.width  - b.width  - padX*2);
    const maxY = Math.max(0, c.height - b.height - padY*2);

    // If container is too short (mobile), expand it once
    if (c.height < b.height + 24) {
      container.style.minHeight = (b.height + 24) + 'px';
    }

    // Random new coordinates clamped to bounds
    const nx = padX + Math.random() * maxX;
    const ny = padY + Math.random() * maxY;

    // Apply via translate to avoid cumulative layout drift
    btn.style.left = padX + 'px';
    btn.style.top  = padY + 'px';
    btn.style.transform = `translate(${nx - padX}px, ${ny - padY}px)`;

    // Also clamp within viewport in case CTA is near edges
    const vw = window.innerWidth, vh = window.innerHeight;
    const rect = btn.getBoundingClientRect();
    if (rect.right > vw)  btn.style.transform = `translate(${nx - padX - (rect.right - vw)}px, ${ny - padY}px)`;
    if (rect.left  < 0)   btn.style.transform = `translate(${nx - padX + (0 - rect.left)}px, ${ny - padY}px)`;
    if (rect.bottom > vh) btn.style.transform = `translate(${nx - padX}px, ${ny - padY - (rect.bottom - vh)}px)`;
    if (rect.top    < 0)  btn.style.transform = `translate(${nx - padX}px, ${ny - padY + (0 - rect.top)}px)`;
  }

  // Make CTA a safe positioning context
  cta.style.position = 'relative';
  no.style.position = 'absolute';   // so left/top/translate are relative to CTA

  yes.addEventListener('click', ()=>{
    q.textContent = "Thank you üíñ";
    show('st-yes');
    yes.disabled = true; no.disabled = true;
  });
</script>

</body>
</html>

